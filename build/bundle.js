!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){},function(t,e){window._configCanvas={w:window.innerWidth,h:window.innerHeight}},function(t,e,i){"use strict";i.r(e);i(0),i(1);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function(){function t(e,i,r,o,a,h,u,c,l){var f=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"setPropertyOnClick",(function(t,e,i){var r=f.stope,o=(f.gameMap,n(f.nextMapCoord,2)),s=o[0],a=o[1],h=n(f.direction,2),u=(h[0],h[1],n(f.mapCoord,2)),c=u[0],l=u[1],y=f.endChangeDirection;if(t){if(y===e||y===i)return;f.checkPassage(s+i,a+e)&&(f.direction=[e,i],f.nextMapCoord=[s+i,a+e],f.mapCoord=[s,a],f.endChangeDirection=0===e?i:e)}else{var d=r?[c+i,l+e]:[s+i,a+e];if(f.checkPassage.apply(f,d))return f.changeCourse=[e,i]}})),s(this,"clearPacman",(function(){var t=f.c;f.x,f.y,f.xs,f.ys,f.r;t.clearRect(0,0,1e3,1e3)})),this.c=e,this.xs=i,this.counterMounth=void 0,this.gameMap=c,this.contextMap=l,this.maxX=c[0].length*i,this.ys=r,this.x=o,this.y=a,this.nextMapCoord=[h,u+1],this.mapCoord=[h,u],this.speed=1,this.angleOpenMounth=Math.PI/50*(i/4*3)/2,this.changeCourse=void 0,this.aa=Math.PI/2,this.direction=[1,0],this.anglePacman=0,this.throughData={xCol:void 0,xD:void 0},this.openMounth=!0,this.stope=!1,this.endChangeDirection=void 0,this.color="#ffff00",this.isThrough=!1,this.name="pac man",this.r=i<r?Math.floor(i/2)-1:Math.floor(r/2)-1,this.createCounterMounth(),this.keyEventId=window.addEventListener("keydown",(function(t){var e=t.code,i=n(f.direction,2),r=i[0],o=i[1],s=f.setPropertyOnClick;switch(e){case"ArrowUp":return s(0!=o?1:0,0,-1);case"ArrowLeft":return s(0!=r?1:0,-1,0);case"ArrowRight":return s(0!=r?1:0,1,0);case"ArrowDown":return s(0!=o?1:0,0,1)}}))}var e,i,r;return e=t,(i=[{key:"createCounterMounth",value:function(){var t=this;this.counterMounth=setInterval((function(){t.openMounth=!t.openMounth}),200)}},{key:"coolision",value:function(t,e){var i=this.stope,r=n(this.mapCoord,2),o=r[0],s=r[1],a=this.gameMap,h=(this.c,n(this.nextMapCoord,2)),u=h[0],c=h[1],l=this.changeCourse;if(this.checkPassage(u,c))return i&&(this.createCounterMounth(),this.stope=!1),this[t]+=e;if("X"===a[o][s])return this.through();if(l){var f=n(l,2),y=f[0],d=f[1];this.nextMapCoord=[o+d,s+y],this.direction=l,this.changeCourse=void 0}i||this.stopePacman()}},{key:"through",value:function(){var t=n(this.direction,1)[0],e=n(this.mapCoord,2),i=e[0],r=e[1],o=this.ys,s=this.xs,a=this.maxX,h=this.throughData,u=h.xCol,c=h.xD,l=this.gameMap,f=u,y=c;if(void 0===u&&(f=r<2?a:0,y=r<2?s:-s),this.x+=t,this.paintPac(y+=t+f,i*o),0===y){var d=n(this.mapCoord,2),v=d[0];return d[1],this.throughData.xD=void 0,this.throughData.xCol=void 0,this.mapCoord=[v,f>0?l[0].length:0],this.nextMapCoord=[v,this.mapCoord[1]+t],this.x=f>0?a:0,void console.log(this.mapCoord,this.nextMapCoord)}this.throughData.xD=y,this.throughData.xCol=f}},{key:"checkPassage",value:function(t,e){var i=this.gameMap[t][e];return"@"===i||"P"===i||"#"===i||"X"===i}},{key:"updateCoords",value:function(t,e,i,r){var o=n(this.nextMapCoord,2),s=o[0],a=o[1],h=n(this.direction,2),u=h[0],c=h[1];if(this[r]!==e)return this.coolision(r,i);if(this.changeCourse||(this.nextMapCoord=[s+c,a+u]),this.changeCourse){var l=n(this.changeCourse,2),f=l[0],y=l[1];this.nextMapCoord=[s+y,a+f],this.direction=this.changeCourse,this.changeCourse=void 0}this.mapCoord=[s,a],this.endChangeDirection=void 0}},{key:"move",value:function(){var t=this.x,e=this.y,i=n(this.direction,2),r=i[0],o=i[1],s=this.speed,a=this.xs,h=this.ys,u=n(this.mapCoord,2),c=u[0],l=u[1],f=n(this.nextMapCoord,2),y=f[0],d=f[1];return l!==d?this.updateCoords(t,a*d,s*r,"x"):c!==y?this.updateCoords(e,h*y,s*o,"y"):void 0}},{key:"stopePacman",value:function(){this.stope=!0,clearInterval(this.counterMounth),this.openMounth=!1}},{key:"ifEatElem",value:function(){var t=n(this.mapCoord,2),e=t[0],i=t[1],r=this.gameMap,o=this.contextMap,s=this.xs,a=this.ys;"@"===r[e][i]&&(r[e][i]="#",o.beginPath(),o.fillStyle="#000",o.fillRect(s*i,a*e,s,a),o.closePath())}},{key:"renderPacMan",value:function(){this.clearPacman(),this.move(),this.paintPac(this.x,this.y),this.ifEatElem()}},{key:"paintPac",value:function(t,e){var i=this.c,r=this.xs,o=this.ys,s=this.color,a=this.r,h=this.angleOpenMounth,u=this.aa,c=this.openMounth,l=n(this.direction,2),f=l[0],y=l[1],d=t+Math.floor(r/2),v=e+Math.floor(o/2),p=0===f?y<0?3:1:f<0?2:0;i.fillStyle=s,i.beginPath(),i.moveTo(d,v),c?i.arc(d,v,a,h+u*p,u*p-h):i.arc(d,v,a,0,2*Math.PI),i.fill()}}])&&o(e.prototype,i),r&&o(e,r),t}();function h(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(e,i,n,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMap=r,this.c=n,this.entities=s,this.cg=o,this.xs=e,this.ys=i,this.cy=i/2,this.cx=e/2,this.dy=i/8,this.dx=e/8,this.ew=e/5,this.eh=i/5,this.exhs=e/2-this.ew/2,this.eyhs=i/2-this.eh/2,this.lineWidth=4,this.colorLine="#1b1bcd"}var e,i,n;return e=t,(i=[{key:"@",value:function(t,e,i,n){var r=this.c,o=this.ew,s=this.eh,a=this.exhs,h=this.eyhs;this.eatItem,r.fillStyle="#ffb8ae",r.fillRect(t+a,e+h,o,s)}},{key:"#",value:function(){}},{key:"X",value:function(){}},{key:"=",value:function(t,e){return this.rdl(t,e,!0)}},{key:"P",value:function(t,e,i,n){var r=this.cg,o=this.xs,s=this.ys,h=this.gameMap,u=this.c;this.entities.pacman=new a(r,o,s,t,e,i,n,h,u)}},{key:"║",value:function(t,e){return this.rdl(t,e,!1)}},{key:"╬",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!0]))}},{key:"╪",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!1]))}},{key:"┅",value:function(t,e){var i=this.c,n=this.cy,r=this.xs,o=this.lineWidth;i.strokeStyle="#ffb8ff",i.lineWidth=o,i.moveTo(t,e+n),i.lineTo(t+r,e+n)}},{key:"|",value:function(t,e){return this.rsl(t,e,!1)}},{key:"-",value:function(t,e){return this.rsl(t,e,!0)}},{key:"L",value:function(t,e){var i=this.xs,n=this.cx,r=this.cy;return this.rsa([t+n,e],[t+n,e+r,t+i,e+r])}},{key:"╕",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t,e+o+a,t+r-s,e+o+a,t+r,e+n,t,e+o-a,e+o-a,t+i)}},{key:"╒",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+i,e+o+a,t+r+s,e+o+a,t+r,e+n,t,e+o-a,e+o-a,t+i)}},{key:"┏",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy;return this.rsa([t+r,e+n],[t+r,e+o,t+i,e+o])}},{key:"┛",value:function(t,e){this.xs,this.ys;var i=this.cx,n=this.cy;return this.rsa([t,e+n],[t+i,e+n,t+i,e])}},{key:"┓",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy;return this.rsa([t,e+r],[t+n,e+r,t+n,e+i])}},{key:"╓",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r+s,e+n,t+r+a,e+o-a,t+i,e+o,t+r-s,e,e+n)}},{key:"╙",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r+s,e,t+r+s,e+o+a,t+i,e+o,t+r-s,e,e+n)}},{key:"╜",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy,o=this.dx,s=this.dy;return this.rdla(t+n-o,e,t+n-s,e+r,t,e+r,t+n+o,e,e+i)}},{key:"╖",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r-s,e+n,t+r-s,e+o-a,t,e+o,t+r+s,e,e+i)}},{key:"rdla",value:function(t,e,i,n,r,o,s,a,h,u){var c=this.c,l=this.colorLine,f=this.lineWidth;c.strokeStyle=l,c.lineWidth=f,c.moveTo(t,e),c.quadraticCurveTo(i,n,r,o),c.moveTo(s,a),c.lineTo(u||s,h)}},{key:"rsa",value:function(t,e){var i=this.c;i.moveTo.apply(i,h(t)),i.quadraticCurveTo.apply(i,h(e))}},{key:"rsl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,s=this.xs,a=this.ys,h=this.colorLine,u=this.lineWidth;n.strokeStyle=h,n.lineWidth=u,i?(n.moveTo(t,e+r),n.lineTo(t+s,e+r)):(n.moveTo(t+o,e),n.lineTo(t+o,e+a))}},{key:"rda",value:function(t,e,i,n,r){var o=this.xs,s=this.ys,a=this.cx,h=this.cy,u=this.dy,c=this.dx,l=this.c,f=this.gameMap,y=this.colorLine,d=this.lineWidth,v=[];l.strokeStyle=y,l.lineWidth=d,i+1==f.length||"="!==f[i+1][n]&&"║"!==f[i+1][n]||v.push([t+a,e+s]),0==i||"="!==f[i-1][n]&&"║"!==f[i-1][n]||v.push([t+a,e]),n+1==f[i].length||"="!==f[i][n+1]&&"║"!==f[i][n+1]||v.push([t+o,e+h]),0==n||"="!==f[i][n-1]&&"║"!==f[i][n-1]||v.push([t,e+h]);var p=v[0],m=v[1],g=p[0],x=p[1],b=m[0],C=m[1],k=g<b?C>x?-1:1:C>x?1:-1,w=g<b?-1:1;[-1,1].map((function(t){l.moveTo(g+c*t,x),r?l.quadraticCurveTo(b+a*w+c*t,C+u*t*k,b,C+u*t*k):(l.lineTo(b+a*w+c*t,C+u*t*k),l.lineTo(b,C+u*t*k))}))}},{key:"rdl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,s=this.dx,a=this.dy,h=this.xs,u=this.ys,c=this.colorLine,l=this.lineWidth;n.strokeStyle=c,n.lineWidth=l,i?(n.moveTo(t,e+r-a),n.lineTo(t+h,e+r-a),n.moveTo(t,e+r+a),n.lineTo(t+h,e+r+a),n.stroke()):(n.moveTo(t+o-s,e),n.lineTo(t+o-s,e+u),n.moveTo(t+o+s,e),n.lineTo(t+o+s,e+u),n.stroke())}}])&&c(e.prototype,i),n&&c(e,n),t}();function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=e,this.gm=i}var e,i,n;return e=t,(i=[{key:"setSize",value:function(){for(var t=this.gm,e=this.size,i=Math.floor(e/t[0].length),n=Math.floor(e/t.length),r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.map((function(e){e.width=i*t[0].length,e.height=n*t.length})),[i,n]}}])&&f(e.prototype,i),n&&f(e,n),t}();function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(){var t=document.getElementById("map"),e={pacman:{}},i=document.getElementById("game"),n=window.innerWidth>window.innerHeight?window.innerHeight-15:window.innerWidth-15,r=t.getContext("2d"),o=i.getContext("2d"),s=[["╬","=","=","=","=","=","=","=","=","=","=","=","=","╕","╒","=","=","=","=","=","=","=","=","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","|","#","#","|","@","|","#","#","#","|","@","|","|","@","|","#","#","#","|","@","|","#","#","|","@","║"],["║","@","L","-","-","┛","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","-","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["╬","=","=","=","=","╬","@","|","L","-","-","┓","@","|","|","@","┏","-","-","┛","|","@","╬","=","=","=","=","╬"],["#","#","#","#","#","║","@","|","┏","-","-","┛","@","L","┛","@","L","-","-","┓","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","╪","=","=","┅","┅","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["=","=","=","=","=","╬","@","L","┛","@","║","#","#","#","#","#","#","║","@","L","┛","@","╬","=","=","=","=","="],["X","#","#","#","#","#","@","@","@","@","║","#","#","#","#","#","#","║","@","@","@","@","#","#","#","#","P","X"],["=","=","=","=","=","╬","@","┏","┓","@","║","#","#","#","#","#","#","║","@","┏","┓","@","╬","=","=","=","=","="],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","┏","-","-","-","-","-","-","┓","@","|","|","@","║","#","#","#","#","#"],["╬","=","=","=","=","╬","@","L","┛","@","L","-","-","┓","┏","-","-","┛","@","L","┛","@","╬","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","┓","|","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","|","┏","-","┛","@","║"],["║","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","║"],["╙","-","┓","@","|","|","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","|","|","@","┏","-","╜"],["╓","-","┛","@","L","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","┛","@","L","-","╖"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["║","@","┏","-","-","-","-","┛","L","-","-","┓","@","|","|","@","┏","-","-","┛","L","-","-","-","-","┓","@","║"],["║","@","L","-","-","-","-","-","-","-","-","┛","@","L","┛","@","L","-","-","-","-","-","-","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["╬","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","╬"]],a=d(new y(n,s).setSize(t,i),2),h=a[0],u=a[1],c=new l(h,u,r,s,o,e);function f(){e.pacman.renderPacMan(),requestAnimationFrame(f)}s.map((function(t,e){t.map((function(t,i){r.beginPath(),c[t](h*i,u*e,e,i),r.stroke()}))})),f(),console.log(c)}()}]);