!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){},function(t,e){window._configCanvas={w:window.innerWidth,h:window.innerHeight,pacmanPosition:[29,13],ghostPosition:{shadow:[14,9],pinki:[14,12],inki:[14,14],klayd:[14,16]},positionGoToHome:{shadow:[14,12],pinki:[14,12],inki:[14,14],klayd:[14,16]},timeId:{globalTypeTimer:null,fructTime:null,ghosts:{shadow:{goOutsideHomeGhosts:null,fright:null},pinki:{goOutsideHomeGhosts:null,fright:null},inki:{goOutsideHomeGhosts:null,fright:null},klayd:{goOutsideHomeGhosts:null,fright:null}},frightTimer:{period:[5e3,3e3,1e3],timer:null}},timeTable:[[{type:"diffusion",time:3e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:!1}],[{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:1033e3},{type:"diffusion",time:3e3},{type:"chase",time:!1}],[{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:1037e3},{type:"diffusion",time:2e3},{type:"chase",time:!1}]],counterEatinOutside:{shadow:0,pinki:0,inki:30,klayd:60},game:{play:!0,pause:!0,restartLevel:!1,currentGlobalType:"diffusion",fright:!1,frutisEaten:!1,countPeriod:0,allEatElement:0,hp:3,level:1,eaten:0,_score:0,set score(t){this._score+=t,ih.updateScore(this._score)},get score(){return this._score}}}},function(t,e,i){"use strict";i.r(e);i(0),i(1);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e,i,r,o,a,s,c,u,h,l){var f,d,p,y=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p=function(t,e,i){var r=y.stope,o=(y.gameMap,n(y.nextMapCoord,2)),a=o[0],s=o[1],c=n(y.direction,2),u=(c[0],c[1],n(y.mapCoord,2)),h=u[0],l=u[1],f=y.endChangeDirection;if(t){if(f===e||f===i)return;y.checkPassage(a+i,s+e)&&(y.direction=[e,i],y.nextMapCoord=[a+i,s+e],y.mapCoord=[a,s],y.endChangeDirection=0===e?i:e)}else{var d=r?[h+i,l+e]:[a+i,s+e];if(y.checkPassage.apply(y,d))return y.changeCourse=[e,i]}},(d="setPropertyOnClick")in(f=this)?Object.defineProperty(f,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[d]=p,this.c=e,this.xs=i,this.entries=l,this.counterMounth=void 0,this.gameMap=u,this.contextMap=h,this.maxX=(u[0].length-1)*i,this.ys=r,this.x=o,this.y=a,this.nextMapCoord=[s,c+1],this.mapCoord=[s,c],this.speed=1,this.angleOpenMounth=Math.PI/50*(i/4*3)/2,this.changeCourse=void 0,this.aa=Math.PI/2,this.direction=[1,0],this.anglePacman=0,this.throughData=void 0,this.openMounth=!0,this.actualSituation=[s,c],this.stope=!1,this.endChangeDirection=void 0,this.color="#ffff00",this.isThrough=!1,this.name="pac man",this.r=i<r?Math.floor(i/2):Math.floor(r/2),this.createCounterMounth(),this.keyEventId=window.addEventListener("keydown",(function(t){var e=t.code,i=n(y.direction,2),r=i[0],o=i[1],a=y.setPropertyOnClick;if(!y.isThrough)switch(e){case"ArrowUp":return a(0!=o?1:0,0,-1);case"ArrowLeft":return a(0!=r?1:0,-1,0);case"ArrowRight":return a(0!=r?1:0,1,0);case"ArrowDown":return a(0!=o?1:0,0,1)}}))}var e,i,r;return e=t,(i=[{key:"createCounterMounth",value:function(){var t=this;this.counterMounth=setInterval((function(){t.openMounth=!t.openMounth}),200)}},{key:"coolision",value:function(t,e){var i=this.stope,r=n(this.mapCoord,2),o=r[0],a=r[1],s=this.gameMap,c=(this.c,n(this.nextMapCoord,2)),u=c[0],h=c[1],l=this.changeCourse,f=this.isThrough;if(f&&this.through(),this.checkPassage(u,h))return i&&(this.createCounterMounth(),this.stope=!1),this[t]+=e;if("X"===s[o][a]&&!f)return this.through();if(l){var d=n(l,2),p=d[0],y=d[1];this.nextMapCoord=[o+y,a+p],this.direction=l,this.changeCourse=void 0}i||f||this.stopePacman()}},{key:"through",value:function(){var t=this.isThrough,e=n(this.direction,1)[0],i=n(this.mapCoord,1)[0],r=this.ys,o=this.xs,a=this.speed;t||this.createTroughConfig(o,e>0);var s=this.throughData,c=s.startPositionPaint,u=s.endTrough;if(this.throughData.startPositionPaint+=e*a,this.x+=e*a,c===u)return this.endTrough(u,o);this.paintPac(c,i*r)}},{key:"createTroughConfig",value:function(t,e){var i=this.maxX;this.throughData={startPositionPaint:e?-t:i+t,endTrough:e?0:i},this.isThrough=!0}},{key:"endTrough",value:function(t){var e=n(this.mapCoord,2),i=e[0],r=(e[1],this.gameMap);return this.x=t,this.mapCoord=[i,0===t?0:r[0].length-1],this.nextMapCoord=[i,0===t?1:r[0].length-2],this.isThrough=!1}},{key:"checkPassage",value:function(t,e){var i=this.gameMap[t][e];return"@"===i||"P"===i||"#"===i||"E"===i||"X"===i||"F"===i}},{key:"updateCoords",value:function(t,e,i,r){var o=n(this.nextMapCoord,2),a=o[0],s=o[1],c=n(this.direction,2),u=c[0],h=c[1];if(this[r]!==e)return this.coolision(r,i);if(this.changeCourse||(this.nextMapCoord=[a+h,s+u]),this.changeCourse){var l=n(this.changeCourse,2),f=l[0],d=l[1];this.nextMapCoord=[a+d,s+f],this.direction=this.changeCourse,this.changeCourse=void 0}this.mapCoord=[a,s],this.endChangeDirection=void 0}},{key:"move",value:function(){var t=this.x,e=this.y,i=n(this.direction,2),r=i[0],o=i[1],a=this.speed,s=this.xs,c=this.ys,u=n(this.mapCoord,2),h=u[0],l=u[1],f=n(this.nextMapCoord,2),d=f[0],p=f[1];return l!==p?this.updateCoords(t,s*p,a*r,"x"):h!==d?this.updateCoords(e,c*d,a*o,"y"):void 0}},{key:"stopePacman",value:function(){this.stope=!0,clearInterval(this.counterMounth),this.openMounth=!1}},{key:"ifEatElem",value:function(){var t=this.gameMap,e=n(this.actualSituation,2),i=e[0],r=e[1],o=t[i][r];return"E"===o?this.eatEnergyzer(i,r):"@"===o?this.eatFood(i,r):void 0}},{key:"addEatenCounter",value:function(t){_configCanvas.game.score=t,++_configCanvas.game.eaten>=_configCanvas.game.allEatElement&&levelUp()}},{key:"paintRect",value:function(t,e){var i=this.gameMap,n=this.contextMap,r=this.xs,o=this.ys;i[t][e]="#",n.beginPath(),n.fillStyle="#000",n.fillRect(r*e,o*t,r,o),n.closePath()}},{key:"eatEnergyzer",value:function(t,e){this.paintRect(t,e),this.addEatenCounter(50),_configCanvas.game.fright=!0;for(var i=0,n=Object.values(this.entries);i<n.length;i++){var r=n[i];"pac man"==r.name||r.isLocked||"goOutside"===r.type||(r.setFright(),r.changeColor())}var o=_configCanvas.timeId.frightTimer,a=_configCanvas.game.level;o.timer&&clearTimeout(o.timer),o.timer=setTimeout((function(){return _configCanvas.game.fright=!1}),1===a?o.period[0]:a>=5?o.period[2]:o.period[1])}},{key:"eatFood",value:function(t,e){this.paintRect(t,e),this.addEatenCounter(10),!(_configCanvas.game.eaten%2)&&_configCanvas.game.eaten>0&&createFrutis()}},{key:"renderPacMan",value:function(){this.move(),this.paintPac(this.x,this.y),this.calcFactualSituation(),this.ifEatElem()}},{key:"calcFactualSituation",value:function(){var t=this.x,e=this.y,i=this.xs,r=this.ys,o=0===n(this.direction,1)[0]?[e,r,0]:[t,i,1];this.actualSituation[o[2]]=Math.floor(o[0]/o[1])+(o[0]%o[1]>o[1]/2?1:0)}},{key:"paintPac",value:function(t,e){var i=this.c,r=this.xs,o=this.ys,a=this.color,s=this.r,c=this.angleOpenMounth,u=this.aa,h=this.openMounth,l=n(this.direction,2),f=l[0],d=l[1],p=t+Math.floor(r/2),y=e+Math.floor(o/2),v=0===f?d<0?3:1:f<0?2:0;i.fillStyle=a,i.beginPath(),i.moveTo(p,y),h?i.arc(p,y,s,c+u*v,u*v-c):i.arc(p,y,s,0,2*Math.PI),i.fill()}}])&&o(e.prototype,i),r&&o(e,r),t}();function s(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"ifTurn",value:function(){var t=this,e=c(this.nexMapCoord,2),i=e[0],n=e[1],r=this.map;return[{nc:[i-1,n],d:[-1,0]},{nc:[i,n+1],d:[0,1]},{nc:[i+1,n],d:[1,0]},{nc:[i,n-1],d:[0,-1]}].filter((function(e){return t.checkElementPermeability(r[e.nc[0]][e.nc[1]])}))}},{key:"render",value:function(){this.paintGhost(),this.move(),this.touchPacman()}},{key:"move",value:function(){var t=c(this.mapCoordiante,2),e=t[0],i=t[1],n=c(this.nexMapCoord,2),r=n[0],o=n[1],a=this.xSteep,s=this.ySteep;i!=o&&this.updateCoord(1,o,a),e!=r&&this.updateCoord(0,r,s),this.calcFactualSituation()}},{key:"updateCoord",value:function(t,e,i){var n=this.speed,r=this.coordinate,o=this.direction,a=this.goToMapOutside,s=this.mapOutsideX,c=r[t],u=e*i,h=o[t];if(a){if(u!=c)return this.mapOutsideX=s+=o[1],this.paintGhost(s),this.coordinate[t]=c+n*h;var l=o[t]>0?0:27;return this.paintGhost(l*i),this.nexMapCoord=[14,l+o[t]],this.mapCoordiante=[14,l],this.coordinate[t]=l*i,this.goToMapOutside=!1}if(u!=c)return this.coordinate[t]=c+n*h;this.setNextCoord(t,e)}},{key:"setNextCoord",value:function(t,e){var i=this.isLocked,n=this.type,r=c(this.actualSituation,2),o=r[0],a=r[1],s=this.xSteep;if(i)return this.lockedNextCoord();if("X"===this.map[o][a])return this.proceedMotion(),this.mapOutsideX=this.direction[1]>0?-s:this.map[0].length*s,this.goToMapOutside=!0;var u=this.ifTurn();if(!u.filter((function(i){return i.nc[t]===e})).length)return this.proceedMotion();this[n](u)}},{key:"goToHome",value:function(t){var e=c(this.nexMapCoord,2),i=e[0],n=e[1],r=this.name;if(!this.toInput&&(14!==i||9!==n))return this.goToThePoint(t,14,9);this.toInput=!0;var o=c(_configCanvas.positionGoToHome[r],2),a=o[0],s=o[1];return i!==a||n!==s?this.goToThePoint(t,a,s):(this.toInput=!1,this.type="goOutside")}},{key:"lockedNextCoord",value:function(){var t=c(this.direction,1)[0],e=c(this.nexMapCoord,2),i=e[0],n=e[1];if(_configCanvas.game.eaten>=_configCanvas.counterEatinOutside[this.name]||_configCanvas.game.level>3)return this.exitLocked();t<0?this.setNewParamsMove([1,0],[i+2,n],[i,n]):this.setNewParamsMove([-1,0],[i-2,n],[i,n])}},{key:"exitLocked",value:function(){this.isLocked=!1,this.type="goOutside"}},{key:"goOutside",value:function(t){var e=c(this.nexMapCoord,2),i=e[0],n=e[1],r=this.eaten;if(14===i&&9===n)return _configCanvas.game.fright&&!r?(this.changeColor(),this.type="fright"):(this.eaten=!1,this.type=_configCanvas.game.currentGlobalType);this.goToThePoint(t,14,9)}},{key:"proceedMotion",value:function(){var t=c(this.nexMapCoord,2),e=t[0],i=t[1],n=c(this.direction,2),r=n[0],o=n[1];this.nexMapCoord=[e+r,i+o],this.mapCoordiante=[e,i]}},{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=c(e.stope?n:i,2),o=r[0],a=r[1];this.goToThePoint(t,o,a)}},{key:"fright",value:function(t){var e=c(this.mapCoordiante,2),i=e[0],n=e[1],r=(t=t.filter((function(t){return t.nc[0]!==i||t.nc[1]!==n})))[Math.floor(Math.random()*t.length)];return this.setNewParamsMove(r.d,r.nc,this.nexMapCoord)}},{key:"diffusion",value:function(t){var e=c(this.diffusionPaintInMap,2),i=e[0],n=e[1];this.goToThePoint(t,i,n)}},{key:"goToThePoint",value:function(t,e,i){var n,r,o=c(this.nexMapCoord,2),a=o[0],u=o[1],h=this.changeType,l=c(this.mapCoordiante,2),f=l[0],d=l[1],p=a<e,y=u>i;if(h||(t=t.filter((function(t){return t.nc[0]!==f||t.nc[1]!==d}))),e===a)return(r=this.gorizontalPath(t,y,u,i)).length?this.setNewParamsMove(r[0].d,r[0].nc,this.nexMapCoord):this.hitTheWall(t,1,u);if(u===i)return(n=this.verticalPath(t,p,a,e)).length?this.setNewParamsMove(n[0].d,n[0].nc,this.nexMapCoord):this.hitTheWall(t,0,a);r=this.gorizontalPath(t,y,u,i),n=this.verticalPath(t,p,a,e);var v=[].concat(s(r),s(n));if(v.length){var m=v[Math.floor(Math.random()*v.length)];return this.setNewParamsMove(m.d,m.nc,this.nexMapCoord)}var g=t.filter((function(t){return t.nc[0]!==f||t.nc[1]!==d}));return this.setNewParamsMove(g[0].d,g[0].nc,this.nexMapCoord)}},{key:"hitTheWall",value:function(t,e,i){var n=this.filtrCurrentPlane(t,e,i),r=n[Math.floor(Math.random()*n.length)];return r?this.setNewParamsMove(r.d,r.nc,this.nexMapCoord):this.setNewParamsMove(t[0].d,t[0].nc,this.nexMapCoord)}},{key:"setFright",value:function(){var t=this.nexMapCoord,e=this.mapCoordiante,i=this.direction;this.type="fright",this.nexMapCoord=e,this.mapCoordiante=t,this.direction=i.map((function(t){return-1*t}))}},{key:"setNewParamsMove",value:function(t,e,i){this.mapCoordiante=i,this.nexMapCoord=e,this.direction=t}},{key:"checkElementPermeability",value:function(t){return"@"===t||"E"===t||"#"===t||("goOutside"===this.type||"goToHome"===this.type)&&"┅"===t}},{key:"filtrCurrentPlane",value:function(t,e,i){return t.filter((function(t){return t.nc[e]===i}))}},{key:"verticalPath",value:function(t,e,i){return e?t.filter((function(t){var e=c(t.nc,1)[0];return i<e})):t.filter((function(t){var e=c(t.nc,1)[0];return i>e}))}},{key:"gorizontalPath",value:function(t,e,i){return e?t.filter((function(t){var e=c(t.nc,2)[1];return i>e})):t.filter((function(t){var e=c(t.nc,2)[1];return i<e}))}},{key:"touchPacman",value:function(){var t=c(this.actualSituation,2),e=t[0],i=t[1],n=this.type,r=c(entities.pacman.actualSituation,2),o=r[0],a=r[1];if(e===o&&i===a){if("fright"===n||"goToHome"===n)return _configCanvas.game.score+=200,clearInterval(_configCanvas.timeId.ghosts[this.name].fright),this.eaten=!0,this.color=this.originColor,this.type="goToHome";var s=--_configCanvas.game.hp;if(ih.removeLife(s),!s)return _configCanvas.game.play=!1;_configCanvas.game.restartLevel=!0}}},{key:"changeColor",value:function(){var t=this;this.color="#5d5db2",_configCanvas.timeId.ghosts[this.name].fright=setInterval((function(){if(!_configCanvas.game.fright)return clearInterval(_configCanvas.timeId.ghosts[t.name].fright),t.type=_configCanvas.game.currentGlobalType,t.color=t.originColor;t.color=t.color===t.originColor?"#5d5db2":t.originColor}),300)}},{key:"calcFactualSituation",value:function(){var t=c(this.coordinate,2),e=t[0],i=t[1],n=this.xSteep,r=this.ySteep,o=c(this.direction,2),a=(o[0],0===o[1]?[e,r,0]:[i,n,1]);this.actualSituation[a[2]]=Math.floor(a[0]/a[1])+(a[0]%a[1]>a[1]/2?1:0)}},{key:"paintGhost",value:function(t){var e=this.contextGame,i=c(this.coordinate,2),n=i[0],r=i[1],o=this.color,a=this.xSteep,s=this.ySteep;if(this.type,r=void 0!==t?t:r,"goToHome"!==this.type){e.beginPath(),e.fillStyle=o;var u=a/8,h=s/5;e.moveTo(r+2,n+s/3),e.quadraticCurveTo(r+a/2,n,r+a-2,n+s/3),e.lineTo(r+a,n+s);for(var l=!1,f=1;f<=8;f++)e.lineTo(r+(a-u*f),n+s-(l?0:h)),l=!l;e.fill()}var d=a/5;[1,-1].map((function(t){e.save(),e.fillStyle="#fff",e.beginPath(),e.translate(r+a/2+t*d,n+s/2),e.scale(1,1.3),e.arc(0,0,s/8,0,2*Math.PI),e.fill(),e.beginPath(),e.fillStyle="#000",e.arc(0,0,s/8/2,0,2*Math.PI),e.fill(),e.restore()})),e.closePath()}},{key:"paintPointHelper",value:function(t,e){var i=this.contextGame,n=this.xSteep,r=this.ySteep;i.beginPath(),i.fillStyle="#red",i.fillRect(e*n,t*r,n,r),i.closePath()}}])&&l(e.prototype,i),n&&l(e,n),t}();function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),t}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w(t);if(e){var r=w(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return T(this,i)}}function T(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){k(i,t);var e=M(i);function i(t,n,r,o,a,s,c,u){var h;return b(this,i),(h=e.call(this)).diffusionPaintInMap=[29,1],h.contextGame=t,h.coordinate=[s,a],h.mapCoordiante=[c,u],h.nexMapCoord=[c+1,u],h.isLocked=!1,h.name="shadow",h.toInput=!1,h.xSteep=n,h.ySteep=r,h.actualSituation=[c,u],h.speed=1,h.map=o,h.color="#ff0000",h.originColor="#ff0000",h.mapOutsideX=void 0,h.direction=[1,0],h.type="diffusion",h.changeType=!1,h}return i}(f),S=function(t){k(i,t);var e=M(i);function i(t,n,r,o,a,s,c,u){var h;return b(this,i),(h=e.call(this)).diffusionPaintInMap=[1,26],h.name="pinki",h.contextGame=t,h.coordinate=[s,a],h.mapCoordiante=[c,u],h.nexMapCoord=[c-1,u],h.xSteep=n,h.ySteep=r,h.toInput=!1,h.actualSituation=[c,u],h.speed=1,h.map=o,h.color="#ffb9ff",h.originColor="#ffb9ff",h.isLocked=!0,h.direction=[-1,0],h.type="diffusion",h.changeType=!1,h}return g(i,[{key:"chase",value:function(t){for(var e,i=entities.pacman,n=i.nextMapCoord,r=i.mapCoord,o=i.stope,a=p(i.direction,2),s=a[0],c=a[1],u=i.gameMap,h=p(o?r:n,2),l=h[0],f=h[1],y=4;y>=0;y--){var v,m=l+y*c,g=f+y*s;if(this.checkElementPermeability(null===(v=u[m])||void 0===v?void 0:v[g])){e=[m,g];break}}this.goToThePoint.apply(this,[t].concat(d(e)))}}]),i}(f),L=function(t){k(i,t);var e=M(i);function i(t,n,r,o,a,s,c,u){var h;return b(this,i),(h=e.call(this)).diffusionPaintInMap=[1,1],h.contextGame=t,h.coordinate=[s,a],h.mapCoordiante=[c,u],h.nexMapCoord=[c+1,u],h.xSteep=n,h.ySteep=r,h.actualSituation=[c,u],h.speed=1,h.map=o,h.toInput=!1,h.color="#00ffff",h.originColor="#00ffff",h.isLocked=!0,h.name="inki",h.direction=[1,0],h.type="diffusion",h.changeType=!1,h}return g(i,[{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=e.stope,o=p(e.direction,2),a=o[0],s=o[1],c=e.gameMap,u=p(entities.shadow.nexMapCoord,2),h=u[0],l=u[1],f=p(r?n:i,2),y=f[0],v=f[1],m=[y,v],g=l>(v=v+2*a-1)?[-3,1]:[3,-1],C=h<(y=y+2*s-1)?[3,-1]:[-3,1];t:for(var b=C[0];0!==b;b+=C[1])for(var k=g[0];0!==k;k+=g[1]){var x,M=y+b,T=v+k;if(this.checkElementPermeability(null===(x=c[y+b])||void 0===x?void 0:x[v+k])){m=[M,T];break t}}this.goToThePoint.apply(this,[t].concat(d(m)))}}]),i}(f),_=function(t){k(i,t);var e=M(i);function i(t,n,r,o,a,s,c,u){var h;return b(this,i),(h=e.call(this)).diffusionPaintInMap=[26,29],h.contextGame=t,h.coordinate=[s,a],h.mapCoordiante=[c,u],h.nexMapCoord=[c-1,u],h.xSteep=n,h.ySteep=r,h.actualSituation=[c,u],h.speed=1,h.map=o,h.isLocked=!0,h.name="klayd",h.color="#ffb951",h.originColor="#ffb951",h.toInput=!1,h.direction=[-1,0],h.type="diffusion",h.changeType=!1,h}return g(i,[{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=e.stope,o=p(this.mapCoordiante,2),a=o[0],s=o[1],c=p(r?n:i,2),u=c[0],h=c[1];if(Math.abs(u-a)<8&&Math.abs(s-h)<8)return this.diffusion(t);this.goToThePoint(t,u,h)}}]),i}(f);function O(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return E(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var j=function(){function t(e,i,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMap=r,this.c=n,this.entities=a,this.cg=o,this.xs=e,this.ys=i,this.cy=i/2,this.cx=e/2,this.dy=i/8,this.dx=e/8,this.ew=e/5,this.eh=i/5,this.exhs=e/2-this.ew/2,this.eyhs=i/2-this.eh/2,this.lineWidth=Math.floor(Math.min(window.innerWidth,window.innerHeight)/300),this.colorLine="#1b1bcd"}var e,i,n;return e=t,(i=[{key:"@",value:function(t,e,i,n){var r=this.c,o=this.ew,a=this.eh,s=this.exhs,c=this.eyhs;this.eatItem,_configCanvas.game.allEatElement++,r.fillStyle="#ffb8ae",r.fillRect(t+s,e+c,o,a)}},{key:"E",value:function(t,e){var i=this.c,n=this.cy,r=this.cx;_configCanvas.game.allEatElement++,i.fillStyle="ffb8ae",i.arc(t+r,e+n,n<r?n:r,0,2*Math.PI),i.fill(),i.beginPath()}},{key:"#",value:function(){}},{key:"X",value:function(){}},{key:"=",value:function(t,e){return this.rdl(t,e,!0)}},{key:"║",value:function(t,e){return this.rdl(t,e,!1)}},{key:"╬",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!0]))}},{key:"╪",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!1]))}},{key:"┅",value:function(t,e){var i=this.c,n=this.cx,r=this.ys,o=this.lineWidth;i.strokeStyle="#ffb8ff",i.lineWidth=o,i.moveTo(t+n,e),i.lineTo(t+n,e+r)}},{key:"|",value:function(t,e){return this.rsl(t,e,!1)}},{key:"-",value:function(t,e){return this.rsl(t,e,!0)}},{key:"L",value:function(t,e){var i=this.xs,n=this.cx,r=this.cy;return this.rsa([t+n,e],[t+n,e+r,t+i,e+r])}},{key:"╕",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t,e+o+s,t+r-a,e+o+s,t+r,e+n,t,e+o-s,e+o-s,t+i)}},{key:"╒",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+i,e+o+s,t+r+a,e+o+s,t+r,e+n,t,e+o-s,e+o-s,t+i)}},{key:"┏",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy;return this.rsa([t+r,e+n],[t+r,e+o,t+i,e+o])}},{key:"┛",value:function(t,e){this.xs,this.ys;var i=this.cx,n=this.cy;return this.rsa([t,e+n],[t+i,e+n,t+i,e])}},{key:"┓",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy;return this.rsa([t,e+r],[t+n,e+r,t+n,e+i])}},{key:"╓",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r+a,e+n,t+r+s,e+o-s,t+i,e+o,t+r-a,e,e+n)}},{key:"╙",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r+a,e,t+r+a,e+o+s,t+i,e+o,t+r-a,e,e+n)}},{key:"╜",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy,o=this.dx,a=this.dy;return this.rdla(t+n-o,e,t+n-a,e+r,t,e+r,t+n+o,e,e+i)}},{key:"╖",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r-a,e+n,t+r-a,e+o-s,t,e+o,t+r+a,e,e+i)}},{key:"rdla",value:function(t,e,i,n,r,o,a,s,c,u){var h=this.c,l=this.colorLine,f=this.lineWidth;h.strokeStyle=l,h.lineWidth=f,h.moveTo(t,e),h.quadraticCurveTo(i,n,r,o),h.moveTo(a,s),h.lineTo(u||a,c)}},{key:"rsa",value:function(t,e){var i=this.c;i.moveTo.apply(i,O(t)),i.quadraticCurveTo.apply(i,O(e))}},{key:"rsl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,a=this.xs,s=this.ys,c=this.colorLine,u=this.lineWidth;n.strokeStyle=c,n.lineWidth=u,i?(n.moveTo(t,e+r),n.lineTo(t+a,e+r)):(n.moveTo(t+o,e),n.lineTo(t+o,e+s))}},{key:"rda",value:function(t,e,i,n,r){var o=this.xs,a=this.ys,s=this.cx,c=this.cy,u=this.dy,h=this.dx,l=this.c,f=this.gameMap,d=this.colorLine,p=this.lineWidth,y=[];l.strokeStyle=d,l.lineWidth=p,i+1==f.length||"="!==f[i+1][n]&&"║"!==f[i+1][n]||y.push([t+s,e+a]),0==i||"="!==f[i-1][n]&&"║"!==f[i-1][n]||y.push([t+s,e]),n+1==f[i].length||"="!==f[i][n+1]&&"║"!==f[i][n+1]||y.push([t+o,e+c]),0==n||"="!==f[i][n-1]&&"║"!==f[i][n-1]||y.push([t,e+c]);var v=y[0],m=y[1],g=v[0],C=v[1],b=m[0],k=m[1],x=g<b?k>C?-1:1:k>C?1:-1,M=g<b?-1:1;[-1,1].map((function(t){l.moveTo(g+h*t,C),r?l.quadraticCurveTo(b+s*M+h*t,k+u*t*x,b,k+u*t*x):(l.lineTo(b+s*M+h*t,k+u*t*x),l.lineTo(b,k+u*t*x))}))}},{key:"rdl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,a=this.dx,s=this.dy,c=this.xs,u=this.ys,h=this.colorLine,l=this.lineWidth;n.strokeStyle=h,n.lineWidth=l,i?(n.moveTo(t,e+r-s),n.lineTo(t+c,e+r-s),n.moveTo(t,e+r+s),n.lineTo(t+c,e+r+s),n.stroke()):(n.moveTo(t+o-a,e),n.lineTo(t+o-a,e+u),n.moveTo(t+o+a,e),n.lineTo(t+o+a,e+u),n.stroke())}}])&&I(e.prototype,i),n&&I(e,n),t}();function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.heightCut=window.innerHeight/100*20,this.size=Math.min(window.innerWidth,window.innerHeight-this.heightCut)-15,this.gm=e}var e,i,n;return e=t,(i=[{key:"setSize",value:function(){var t=this.gm,e=this.size,i=document.getElementById("interface").style,n=Math.floor(e/t[0].length),r=Math.floor(e/t.length),o=n*t[0].length,a=r*t.length,s=a+this.heightCut;i.width=o+"px",i.height=s+"px",document.querySelector(".panel_middle").style.height="".concat(a,"px"),i.setProperty("--height-edge","".concat((s-a)/2,"px")),i.setProperty("--readyY","".concat(-r,"px"));for(var c=arguments.length,u=new Array(c),h=0;h<c;h++)u[h]=arguments[h];return u.map((function(t){t.width=o,t.height=a})),[n,r]}}])&&A(e.prototype,i),n&&A(e,n),t}();function W(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elWrapper=document.getElementById("interface"),this.elScore=document.querySelector(".score > span"),this.level=document.querySelector(".level > span"),this.allPacmanLife=document.querySelectorAll(".life > svg")}var e,i,n;return e=t,(i=[{key:"updateScore",value:function(t){this.elScore.innerHTML=t}},{key:"removeLife",value:function(t){this.allPacmanLife[t].style.opacity=0}},{key:"levelUp",value:function(t){this.level.innerHTML=t}}])&&W(e.prototype,i),n&&W(e,n),t}();function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(){var t=document.getElementById("map");window.entities={pacman:{}},window.resetLevel=function(){p()},window.levelUp=function(){ih.levelUp(++_configCanvas.game.level),_configCanvas.game.restartLevel=!0,_configCanvas.game.allEatElement=0,_configCanvas.game.eaten=0,r=[["╬","=","=","=","=","=","=","=","=","=","=","=","=","╕","╒","=","=","=","=","=","=","=","=","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","E","|","#","#","|","@","|","#","#","#","|","@","|","|","@","|","#","#","#","|","@","|","#","#","|","E","║"],["║","@","L","-","-","┛","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","-","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["╬","=","=","=","=","╬","@","|","L","-","-","┓","@","|","|","@","┏","-","-","┛","|","@","╬","=","=","=","=","╬"],["#","#","#","#","#","║","@","|","┏","-","-","┛","@","L","┛","@","L","-","-","┓","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["=","=","=","=","=","╬","@","L","┛","@","║","#","#","#","#","#","#","║","@","L","┛","@","╬","=","=","=","=","="],["X","#","#","#","#","#","@","@","@","@","┅","#","#","#","#","#","#","║","@","@","@","@","#","#","#","#","#","X"],["=","=","=","=","=","╬","@","┏","┓","@","║","#","#","#","#","#","#","║","@","┏","┓","@","╬","=","=","=","=","="],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","┏","-","-","-","-","-","-","┓","@","|","|","@","║","#","#","#","#","#"],["╬","=","=","=","=","╬","@","L","┛","@","L","-","-","┓","┏","-","-","┛","@","L","┛","@","╬","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","┓","|","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","|","┏","-","┛","@","║"],["║","E","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","E","║"],["╙","-","┓","@","|","|","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","|","|","@","┏","-","╜"],["╓","-","┛","@","L","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","┛","@","L","-","╖"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["║","@","┏","-","-","-","-","┛","L","-","-","┓","@","|","|","@","┏","-","-","┛","L","-","-","-","-","┓","@","║"],["║","@","L","-","-","-","-","-","-","-","-","┛","@","L","┛","@","L","-","-","-","-","-","-","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["╬","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","╬"]],h()},window.createFrutis=function(){var t=i,e=18*s,n=14*c,o=s/4,a=c/4,u=Math.min(o,a);"@"===r[14][18]&&(_configCanvas.game.frutisEaten=!0),r[14][18]="F",t.beginPath(),t.fillStyle="#000",t.fillRect(e,n,s,c),[-1,.3].map((function(i,r){t.beginPath(),t.fillStyle="red",t.strokeStyle="#000",t.lineWidth=1;var h=e+s/2+o*i,l=n+c-a;t.arc(h,l,u,0,2*Math.PI),t.fill(),t.stroke(),t.beginPath(),t.strokeStyle="#7b592c",t.lineWidth=2,t.moveTo(h,l-a/3),t.lineTo(e+s/2,n+a),1===r&&t.lineTo(e+s/1.5,n+c/6),t.stroke()})),t.beginPath(),_configCanvas.timeId.fructTime=setTimeout((function(){_configCanvas.game.frutisEaten?r[14][18]="@":r[14][18]="#",_configCanvas.game.frutisEaten=!1}),9500)},window.ih=new H;var e=document.getElementById("game"),i=t.getContext("2d"),n=e.getContext("2d"),r=[["╬","=","=","=","=","=","=","=","=","=","=","=","=","╕","╒","=","=","=","=","=","=","=","=","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","E","|","#","#","|","@","|","#","#","#","|","@","|","|","@","|","#","#","#","|","@","|","#","#","|","E","║"],["║","@","L","-","-","┛","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","-","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["╬","=","=","=","=","╬","@","|","L","-","-","┓","@","|","|","@","┏","-","-","┛","|","@","╬","=","=","=","=","╬"],["#","#","#","#","#","║","@","|","┏","-","-","┛","@","L","┛","@","L","-","-","┓","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["=","=","=","=","=","╬","@","L","┛","@","║","#","#","#","#","#","#","║","@","L","┛","@","╬","=","=","=","=","="],["X","#","#","#","#","#","@","@","@","@","┅","#","#","#","#","#","#","║","@","@","@","@","#","#","#","#","#","X"],["=","=","=","=","=","╬","@","┏","┓","@","║","#","#","#","#","#","#","║","@","┏","┓","@","╬","=","=","=","=","="],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","┏","-","-","-","-","-","-","┓","@","|","|","@","║","#","#","#","#","#"],["╬","=","=","=","=","╬","@","L","┛","@","L","-","-","┓","┏","-","-","┛","@","L","┛","@","╬","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","┓","|","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","|","┏","-","┛","@","║"],["║","E","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","E","║"],["╙","-","┓","@","|","|","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","|","|","@","┏","-","╜"],["╓","-","┛","@","L","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","┛","@","L","-","╖"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["║","@","┏","-","-","-","-","┛","L","-","-","┓","@","|","|","@","┏","-","-","┛","L","-","-","-","-","┓","@","║"],["║","@","L","-","-","-","-","-","-","-","-","┛","@","L","┛","@","L","-","-","-","-","-","-","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["╬","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","╬"]],o=R(new G(r).setSize(t,e),2),s=o[0],c=o[1],u=new j(s,c,i,r,n,entities);function h(){r.map((function(t,e){t.map((function(t,n){i.beginPath(),u[t](s*n,c*e,e,n),i.stroke()}))}))}function l(){clearTimeout(_configCanvas.timeId.globalTypeTimer);var t=_configCanvas.game.level,e=_configCanvas.timeTable[1===t?0:t>=5?2:1][_configCanvas.game.countPeriod++];if(e){for(var i=0,n=Object.values(entities);i<n.length;i++){var r=n[i],o=r.type;"pac man"!==o&&"goOutside"!==o&&"fright"!==o&&"goToHome"!==o&&(r.type=e.type)}_configCanvas.game.currentGlobalType=e.type,e.time&&(_configCanvas.timeId.globalTypeTimer=setTimeout(l,e.time))}}function f(){n.clearRect(0,0,1e3,1e3);var t=entities,e=t.pacman,i=t.shadow,r=t.pinki,o=t.inki,a=t.klayd;e.renderPacMan(),i.render(),r.render(),o.render(),a.render()}function d(){if(_configCanvas.game.play&&!_configCanvas.game.pause){if(f(),_configCanvas.game.restartLevel)return p();requestAnimationFrame(d)}}function p(){var t,e,o,u,h,p,y,v,m,g,C,b,k,x,M,T,w=document.querySelector(".ready");t=R(_configCanvas.pacmanPosition,2),e=t[0],o=t[1],entities.pacman=new a(n,s,c,o*s,e*c,e,o,r,i,entities),u=_configCanvas.ghostPosition,h=R(u.pinki,2),p=h[0],y=h[1],v=R(u.shadow,2),m=v[0],g=v[1],C=R(u.inki,2),b=C[0],k=C[1],x=R(u.klayd,2),M=x[0],T=x[1],entities.shadow=new P(n,s,c,r,s*g,c*m,m,g),entities.pinki=new S(n,s,c,r,s*y,c*p,p,y),entities.inki=new L(n,s,c,r,s*k,c*b,b,k),entities.klayd=new _(n,s,c,r,s*T,c*M,M,T),l(),f(),_configCanvas.game.pause=!0,w.classList.add("ready_active"),setTimeout((function(){w.classList.remove("ready_active"),_configCanvas.game.pause=!1,_configCanvas.game.restartLevel=!1,d()}),1500)}h(),p()}()}]);