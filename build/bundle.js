!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e){window._configCanvas={w:window.innerWidth,h:window.innerHeight}},function(t,e,n){"use strict";n.r(e);n(0),n(1);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function t(e,n,r,o,a,h,u,c){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"setPropertyOnClick",(function(t,e,n){var r=l.stope,o=(l.gameMap,i(l.nextMapCoord,2)),s=o[0],a=o[1],h=i(l.direction,2),u=(h[0],h[1],i(l.mapCoord,2)),c=u[0],f=u[1],y=l.endChangeDirection;if(t){if(y===e||y===n)return;l.checkPassage(s+n,a+e)&&(l.direction=[e,n],l.nextMapCoord=[s+n,a+e],l.mapCoord=[s,a],l.endChangeDirection=0===e?n:e)}else{var d=r?[c+n,f+e]:[s+n,a+e];if(l.checkPassage.apply(l,d))return l.changeCourse=[e,n]}})),s(this,"clearPacman",(function(){var t=l.c,e=l.x,n=l.y,i=l.xs,r=l.ys;l.r;t.clearRect(e,n-1,i,r)})),this.c=e,this.xs=n,this.counterMounth=void 0,this.gameMap=c,this.ys=r,this.x=o,this.y=a,this.nextMapCoord=[h,u+1],this.mapCoord=[h,u],this.speed=1,this.angleOpenMounth=Math.PI/50*(n/4*3)/2,this.changeCourse=void 0,this.aa=Math.PI/2,this.direction=[1,0],this.anglePacman=0,this.openMounth=!0,this.stope=!1,this.endChangeDirection=void 0,this.color="#ffff00",this.name="pac man",this.r=n<r?Math.floor(n/2)-1:Math.floor(r/2)-1,this.createCounterMounth(),this.keyEventId=window.addEventListener("keydown",(function(t){var e=t.code,n=i(l.direction,2),r=n[0],o=n[1],s=l.setPropertyOnClick;switch(e){case"ArrowUp":return s(0!=o?1:0,0,-1);case"ArrowLeft":return s(0!=r?1:0,-1,0);case"ArrowRight":return s(0!=r?1:0,1,0);case"ArrowDown":return s(0!=o?1:0,0,1)}}))}var e,n,r;return e=t,(n=[{key:"createCounterMounth",value:function(){var t=this;this.counterMounth=setInterval((function(){t.openMounth=!t.openMounth}),200)}},{key:"coolision",value:function(t,e){var n=this.stope,r=i(this.mapCoord,2),o=r[0],s=r[1],a=(this.gameMap,this.c,i(this.nextMapCoord,2)),h=a[0],u=a[1],c=this.changeCourse;if(this.checkPassage(h,u))return n&&(this.createCounterMounth(),this.stope=!1),this[t]+=e;if(c){var l=i(c,2),f=l[0],y=l[1];this.nextMapCoord=[o+y,s+f],this.direction=c,this.changeCourse=void 0}n||this.stopePacman()}},{key:"checkPassage",value:function(t,e){var n=this.gameMap[t][e];return"@"===n||"P"===n||"#"===n}},{key:"updateCoords",value:function(t,e,n,r){var o=i(this.nextMapCoord,2),s=o[0],a=o[1],h=i(this.direction,2),u=h[0],c=h[1];if(this[r]!==e)return this.coolision(r,n);if(this.changeCourse||(this.nextMapCoord=[s+c,a+u]),this.changeCourse){var l=i(this.changeCourse,2),f=l[0],y=l[1];this.nextMapCoord=[s+y,a+f],this.direction=this.changeCourse,this.changeCourse=void 0}this.mapCoord=[s,a],this.endChangeDirection=void 0}},{key:"move",value:function(){var t=this.x,e=this.y,n=i(this.direction,2),r=n[0],o=n[1],s=this.speed,a=this.xs,h=this.ys,u=i(this.mapCoord,2),c=u[0],l=u[1],f=i(this.nextMapCoord,2),y=f[0],d=f[1];return l!==d?this.updateCoords(t,a*d,s*r,"x"):c!==y?this.updateCoords(e,h*y,s*o,"y"):void 0}},{key:"stopePacman",value:function(){this.stope=!0,clearInterval(this.counterMounth),this.openMounth=!1}},{key:"renderPacMan",value:function(){this.clearPacman(),this.move();var t=this.c,e=this.xs,n=this.ys,r=this.x,o=this.y,s=this.color,a=this.r,h=this.angleOpenMounth,u=this.aa,c=this.openMounth,l=i(this.direction,2),f=l[0],y=l[1],d=r+Math.floor(e/2),v=o+Math.floor(n/2),p=0===f?y<0?3:1:f<0?2:0;t.fillStyle=s,t.beginPath(),t.moveTo(d,v),c?t.arc(d,v,a,h+u*p,u*p-h):t.arc(d,v,a,0,2*Math.PI),t.fill()}}])&&o(e.prototype,n),r&&o(e,r),t}();function h(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMap=r,this.c=i,this.entities=s,this.cg=o,this.xs=e,this.ys=n,this.cy=n/2,this.cx=e/2,this.dy=n/8,this.dx=e/8,this.ew=e/5,this.eh=n/5,this.exhs=e/2-this.ew/2,this.eyhs=n/2-this.eh/2,this.lineWidth=4,this.colorLine="#1b1bcd"}var e,n,i;return e=t,(n=[{key:"@",value:function(t,e){var n=this.c,i=this.ew,r=this.eh,o=this.exhs,s=this.eyhs;n.fillStyle="#ffb8ae",n.fillRect(t+o,e+s,i,r)}},{key:"#",value:function(){}},{key:"=",value:function(t,e){return this.rdl(t,e,!0)}},{key:"P",value:function(t,e,n,i){var r=this.cg,o=this.xs,s=this.ys,h=this.gameMap;this.entities.pacman=new a(r,o,s,t,e,n,i,h)}},{key:"║",value:function(t,e){return this.rdl(t,e,!1)}},{key:"╬",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!0]))}},{key:"╪",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!1]))}},{key:"┅",value:function(t,e){var n=this.c,i=this.cy,r=this.xs,o=this.lineWidth;n.strokeStyle="#ffb8ff",n.lineWidth=o,n.moveTo(t,e+i),n.lineTo(t+r,e+i)}},{key:"|",value:function(t,e){return this.rsl(t,e,!1)}},{key:"-",value:function(t,e){return this.rsl(t,e,!0)}},{key:"L",value:function(t,e){var n=this.xs,i=this.cx,r=this.cy;return this.rsa([t+i,e],[t+i,e+r,t+n,e+r])}},{key:"╕",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t,e+o+a,t+r-s,e+o+a,t+r,e+i,t,e+o-a,e+o-a,t+n)}},{key:"╒",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+n,e+o+a,t+r+s,e+o+a,t+r,e+i,t,e+o-a,e+o-a,t+n)}},{key:"┏",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy;return this.rsa([t+r,e+i],[t+r,e+o,t+n,e+o])}},{key:"┛",value:function(t,e){this.xs,this.ys;var n=this.cx,i=this.cy;return this.rsa([t,e+i],[t+n,e+i,t+n,e])}},{key:"┓",value:function(t,e){this.xs;var n=this.ys,i=this.cx,r=this.cy;return this.rsa([t,e+r],[t+i,e+r,t+i,e+n])}},{key:"╓",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r+s,e+i,t+r+a,e+o-a,t+n,e+o,t+r-s,e,e+i)}},{key:"╙",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r+s,e,t+r+s,e+o+a,t+n,e+o,t+r-s,e,e+i)}},{key:"╜",value:function(t,e){this.xs;var n=this.ys,i=this.cx,r=this.cy,o=this.dx,s=this.dy;return this.rdla(t+i-o,e,t+i-s,e+r,t,e+r,t+i+o,e,e+n)}},{key:"╖",value:function(t,e){var n=this.xs,i=this.ys,r=this.cx,o=this.cy,s=this.dx,a=this.dy;return this.rdla(t+r-s,e+i,t+r-s,e+o-a,t,e+o,t+r+s,e,e+n)}},{key:"rdla",value:function(t,e,n,i,r,o,s,a,h,u){var c=this.c,l=this.colorLine,f=this.lineWidth;c.strokeStyle=l,c.lineWidth=f,c.moveTo(t,e),c.quadraticCurveTo(n,i,r,o),c.moveTo(s,a),c.lineTo(u||s,h)}},{key:"rsa",value:function(t,e){var n=this.c;n.moveTo.apply(n,h(t)),n.quadraticCurveTo.apply(n,h(e))}},{key:"rsl",value:function(t,e,n){var i=this.c,r=this.cy,o=this.cx,s=this.xs,a=this.ys,h=this.colorLine,u=this.lineWidth;i.strokeStyle=h,i.lineWidth=u,n?(i.moveTo(t,e+r),i.lineTo(t+s,e+r)):(i.moveTo(t+o,e),i.lineTo(t+o,e+a))}},{key:"rda",value:function(t,e,n,i,r){var o=this.xs,s=this.ys,a=this.cx,h=this.cy,u=this.dy,c=this.dx,l=this.c,f=this.gameMap,y=this.colorLine,d=this.lineWidth,v=[];l.strokeStyle=y,l.lineWidth=d,n+1==f.length||"="!==f[n+1][i]&&"║"!==f[n+1][i]||v.push([t+a,e+s]),0==n||"="!==f[n-1][i]&&"║"!==f[n-1][i]||v.push([t+a,e]),i+1==f[n].length||"="!==f[n][i+1]&&"║"!==f[n][i+1]||v.push([t+o,e+h]),0==i||"="!==f[n][i-1]&&"║"!==f[n][i-1]||v.push([t,e+h]);var p=v[0],m=v[1],g=p[0],b=p[1],x=m[0],w=m[1],k=g<x?w>b?-1:1:w>b?1:-1,C=g<x?-1:1;[-1,1].map((function(t){l.moveTo(g+c*t,b),r?l.quadraticCurveTo(x+a*C+c*t,w+u*t*k,x,w+u*t*k):(l.lineTo(x+a*C+c*t,w+u*t*k),l.lineTo(x,w+u*t*k))}))}},{key:"rdl",value:function(t,e,n){var i=this.c,r=this.cy,o=this.cx,s=this.dx,a=this.dy,h=this.xs,u=this.ys,c=this.colorLine,l=this.lineWidth;i.strokeStyle=c,i.lineWidth=l,n?(i.moveTo(t,e+r-a),i.lineTo(t+h,e+r-a),i.moveTo(t,e+r+a),i.lineTo(t+h,e+r+a),i.stroke()):(i.moveTo(t+o-s,e),i.lineTo(t+o-s,e+u),i.moveTo(t+o+s,e),i.lineTo(t+o+s,e+u),i.stroke())}}])&&c(e.prototype,n),i&&c(e,i),t}();function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=e,this.gm=n}var e,n,i;return e=t,(n=[{key:"setSize",value:function(){for(var t=this.gm,e=this.size,n=Math.floor(e/t[0].length),i=Math.floor(e/t.length),r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return o.map((function(e){e.width=n*t[0].length,e.height=i*t.length})),[n,i]}}])&&f(e.prototype,n),i&&f(e,i),t}();function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(){var t=document.getElementById("map"),e={pacman:{}},n=document.getElementById("game"),i=window.innerWidth>window.innerHeight?window.innerHeight-15:window.innerWidth-15,r=t.getContext("2d"),o=n.getContext("2d"),s=[["╬","=","=","=","=","=","=","=","=","=","=","=","=","╕","╒","=","=","=","=","=","=","=","=","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","|","#","#","|","@","|","#","#","#","|","@","|","|","@","|","#","#","#","|","@","|","#","#","|","@","║"],["║","@","L","-","-","┛","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","-","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["╬","=","=","=","=","╬","@","|","L","-","-","┓","@","|","|","@","┏","-","-","┛","|","@","╬","=","=","=","=","╬"],["#","#","#","#","#","║","@","|","┏","-","-","┛","@","L","┛","@","L","-","-","┓","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","╪","=","=","┅","┅","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["=","=","=","=","=","╬","@","L","┛","@","║","#","#","#","#","#","#","║","@","L","┛","@","╬","=","=","=","=","="],["#","#","#","#","#","#","@","@","@","@","║","#","#","#","#","#","#","║","@","@","@","@","#","#","#","#","#","#"],["=","=","=","=","=","╬","@","┏","┓","@","║","#","#","#","#","#","#","║","@","┏","┓","@","╬","=","=","=","=","="],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","┏","-","-","-","-","-","-","┓","@","|","|","@","║","#","#","#","#","#"],["╬","=","=","=","=","╬","@","L","┛","@","L","-","-","┓","┏","-","-","┛","@","L","┛","@","╬","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","┓","|","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","|","┏","-","┛","@","║"],["║","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","║"],["╙","-","┓","@","|","|","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","|","|","@","┏","-","╜"],["╓","-","┛","@","L","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","┛","@","L","-","╖"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["║","@","┏","-","-","-","-","┛","L","-","-","┓","@","|","|","@","┏","-","-","┛","L","-","-","-","-","┓","@","║"],["║","@","L","-","-","-","-","-","-","-","-","┛","@","L","┛","@","L","-","-","-","-","-","-","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","P","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["╬","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","╬"]],a=d(new y(i,s).setSize(t,n),2),h=a[0],u=a[1],c=new l(h,u,r,s,o,e);function f(){e.pacman.renderPacMan(),requestAnimationFrame(f)}s.map((function(t,e){t.map((function(t,n){r.beginPath(),c[t](h*n,u*e,e,n),r.stroke()}))})),f()}()}]);