!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){},function(t,e){window._configCanvas={w:window.innerWidth,h:window.innerHeight,ghostPosition:{shadow:[14,9],pinki:[14,12],inki:[14,14],klayd:[14,16]},positionGoToHome:{shadow:[14,12],pinki:[14,12],inki:[14,14],klayd:[14,16]},timeId:{ghosts:{shadow:{goOutsideHomeGhosts:null,fright:null},pinki:{goOutsideHomeGhosts:null,fright:null},inki:{goOutsideHomeGhosts:null,fright:null},klayd:{goOutsideHomeGhosts:null,fright:null}},frightTimer:{period:[5e4,3e3,1e3],timer:null}},timeTable:[[{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:!1}],[{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:1033e3},{type:"diffusion",time:3e3},{type:"chase",time:!1}],[{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:7e3},{type:"chase",time:2e4},{type:"diffusion",time:5e3},{type:"chase",time:1037e3},{type:"diffusion",time:2e3},{type:"chase",time:!1}]],counterEatinOutside:{shadow:0,pinki:0,inki:30,klayd:60},game:{play:!0,currentGlobalType:"diffusion",fright:!1,countPeriod:0,level:1,eaten:0,score:0}}},function(t,e,i){"use strict";i.r(e);i(0),i(1);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s=function(){function t(e,i,r,o,s,h,u,c,l,f){var y=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"setPropertyOnClick",(function(t,e,i){var r=y.stope,o=(y.gameMap,n(y.nextMapCoord,2)),a=o[0],s=o[1],h=n(y.direction,2),u=(h[0],h[1],n(y.mapCoord,2)),c=u[0],l=u[1],f=y.endChangeDirection;if(t){if(f===e||f===i)return;y.checkPassage(a+i,s+e)&&(y.direction=[e,i],y.nextMapCoord=[a+i,s+e],y.mapCoord=[a,s],y.endChangeDirection=0===e?i:e)}else{var d=r?[c+i,l+e]:[a+i,s+e];if(y.checkPassage.apply(y,d))return y.changeCourse=[e,i]}})),a(this,"clearPacman",(function(){var t=y.c;y.x,y.y,y.xs,y.ys,y.r;t.clearRect(0,0,1e3,1e3)})),this.c=e,this.xs=i,this.entries=f,this.counterMounth=void 0,this.gameMap=c,this.contextMap=l,this.maxX=(c[0].length-1)*i,this.ys=r,this.x=o,this.y=s,this.nextMapCoord=[h,u+1],this.mapCoord=[h,u],this.speed=1,this.angleOpenMounth=Math.PI/50*(i/4*3)/2,this.changeCourse=void 0,this.aa=Math.PI/2,this.direction=[1,0],this.anglePacman=0,this.throughData=void 0,this.openMounth=!0,this.actualSituation=[h,u],this.stope=!1,this.endChangeDirection=void 0,this.color="#ffff00",this.isThrough=!1,this.name="pac man",this.r=i<r?Math.floor(i/2):Math.floor(r/2),this.createCounterMounth(),this.keyEventId=window.addEventListener("keydown",(function(t){var e=t.code,i=n(y.direction,2),r=i[0],o=i[1],a=y.setPropertyOnClick;if(!y.isThrough)switch(e){case"ArrowUp":return a(0!=o?1:0,0,-1);case"ArrowLeft":return a(0!=r?1:0,-1,0);case"ArrowRight":return a(0!=r?1:0,1,0);case"ArrowDown":return a(0!=o?1:0,0,1)}}))}var e,i,r;return e=t,(i=[{key:"createCounterMounth",value:function(){var t=this;this.counterMounth=setInterval((function(){t.openMounth=!t.openMounth}),200)}},{key:"coolision",value:function(t,e){var i=this.stope,r=n(this.mapCoord,2),o=r[0],a=r[1],s=this.gameMap,h=(this.c,n(this.nextMapCoord,2)),u=h[0],c=h[1],l=this.changeCourse,f=this.isThrough;if(f&&this.through(),this.checkPassage(u,c))return i&&(this.createCounterMounth(),this.stope=!1),this[t]+=e;if("X"===s[o][a]&&!f)return this.through();if(l){var y=n(l,2),d=y[0],p=y[1];this.nextMapCoord=[o+p,a+d],this.direction=l,this.changeCourse=void 0}i||f||this.stopePacman()}},{key:"through",value:function(){var t=this.isThrough,e=n(this.direction,1)[0],i=n(this.mapCoord,1)[0],r=this.ys,o=this.xs,a=this.speed;t||this.createTroughConfig(o,e>0);var s=this.throughData,h=s.startPositionPaint,u=s.endTrough;if(this.throughData.startPositionPaint+=e*a,this.x+=e*a,h===u)return this.endTrough(u,o);this.paintPac(h,i*r)}},{key:"createTroughConfig",value:function(t,e){var i=this.maxX;this.throughData={startPositionPaint:e?-t:i+t,endTrough:e?0:i},this.isThrough=!0}},{key:"endTrough",value:function(t){var e=n(this.mapCoord,2),i=e[0],r=(e[1],this.gameMap);return this.x=t,this.mapCoord=[i,0===t?0:r[0].length-1],this.nextMapCoord=[i,0===t?1:r[0].length-2],this.isThrough=!1}},{key:"checkPassage",value:function(t,e){var i=this.gameMap[t][e];return"@"===i||"P"===i||"#"===i||"E"===i||"X"===i}},{key:"updateCoords",value:function(t,e,i,r){var o=n(this.nextMapCoord,2),a=o[0],s=o[1],h=n(this.direction,2),u=h[0],c=h[1];if(this[r]!==e)return this.coolision(r,i);if(this.changeCourse||(this.nextMapCoord=[a+c,s+u]),this.changeCourse){var l=n(this.changeCourse,2),f=l[0],y=l[1];this.nextMapCoord=[a+y,s+f],this.direction=this.changeCourse,this.changeCourse=void 0}this.mapCoord=[a,s],this.endChangeDirection=void 0}},{key:"move",value:function(){var t=this.x,e=this.y,i=n(this.direction,2),r=i[0],o=i[1],a=this.speed,s=this.xs,h=this.ys,u=n(this.mapCoord,2),c=u[0],l=u[1],f=n(this.nextMapCoord,2),y=f[0],d=f[1];return l!==d?this.updateCoords(t,s*d,a*r,"x"):c!==y?this.updateCoords(e,h*y,a*o,"y"):void 0}},{key:"stopePacman",value:function(){this.stope=!0,clearInterval(this.counterMounth),this.openMounth=!1}},{key:"ifEatElem",value:function(){var t=this.gameMap,e=n(this.mapCoord,2),i=e[0],r=e[1],o=t[i][r];return"E"===o?this.eatEnergyzer(i,r):"@"===o?this.eatFood(i,r):void 0}},{key:"paintRect",value:function(t,e){var i=this.gameMap,n=this.contextMap,r=this.xs,o=this.ys;i[t][e]="#",n.beginPath(),n.fillStyle="#000",n.fillRect(r*e,o*t,r,o),n.closePath()}},{key:"eatEnergyzer",value:function(t,e){this.paintRect(t,e),_configCanvas.game.fright=!0;for(var i=0,n=Object.values(this.entries);i<n.length;i++){var r=n[i];"pac man"==r.name||r.isLocked||"goOutside"===r.type||(r.type="fright",r.changeColor())}var o=_configCanvas.timeId.frightTimer,a=_configCanvas.game.level;o.timer&&clearTimeout(o.timer),o.timer=setTimeout((function(){return _configCanvas.game.fright=!1}),1===a?o.period[0]:a>=5?o.period[2]:o.period[1])}},{key:"eatFood",value:function(t,e){this.paintRect(t,e),_configCanvas.game.eaten++,_configCanvas.game.score+=10}},{key:"renderPacMan",value:function(){this.clearPacman(),this.move(),this.paintPac(this.x,this.y),this.calcFactualSituation(),this.ifEatElem()}},{key:"calcFactualSituation",value:function(){var t=this.x,e=this.y,i=this.xs,r=this.ys,o=0===n(this.direction,1)[0]?[e,r,0]:[t,i,1];this.actualSituation[o[2]]=Math.floor(o[0]/o[1])+(o[0]%o[1]>o[1]/2?1:0)}},{key:"paintPac",value:function(t,e){var i=this.c,r=this.xs,o=this.ys,a=this.color,s=this.r,h=this.angleOpenMounth,u=this.aa,c=this.openMounth,l=n(this.direction,2),f=l[0],y=l[1],d=t+Math.floor(r/2),p=e+Math.floor(o/2),v=0===f?y<0?3:1:f<0?2:0;i.fillStyle=a,i.beginPath(),i.moveTo(d,p),c?i.arc(d,p,s,h+u*v,u*v-h):i.arc(d,p,s,0,2*Math.PI),i.fill()}}])&&o(e.prototype,i),r&&o(e,r),t}();function h(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"ifTurn",value:function(){var t=this,e=u(this.nexMapCoord,2),i=e[0],n=e[1],r=this.map;return[{nc:[i-1,n],d:[-1,0]},{nc:[i,n+1],d:[0,1]},{nc:[i+1,n],d:[1,0]},{nc:[i,n-1],d:[0,-1]}].filter((function(e){return t.checkElementPermeability(r[e.nc[0]][e.nc[1]])}))}},{key:"render",value:function(){this.paintGhost(),this.move(),this.touchPacman()}},{key:"move",value:function(){var t=u(this.mapCoordiante,2),e=t[0],i=t[1],n=u(this.nexMapCoord,2),r=n[0],o=n[1],a=this.xSteep,s=this.ySteep;i!=o&&this.updateCoord(1,o,a),e!=r&&this.updateCoord(0,r,s),this.calcFactualSituation()}},{key:"updateCoord",value:function(t,e,i){var n=this.speed,r=this.coordinate,o=this.direction,a=r[t],s=e*i,h=o[t];if(s!=a)return this.coordinate[t]=a+n*h;this.setNextCoord(t,e)}},{key:"setNextCoord",value:function(t,e){if(this.isLocked)return this.lockedNextCoord();var i=this.ifTurn();if(!i.filter((function(i){return i.nc[t]===e})).length)return this.proceedMotion();switch(this.type){case"chase":return this.chase(i);case"diffusion":return this.diffusion(i);case"fright":return this.fright(i);case"goOutside":return this.goOutside(i);case"goToHome":return this.goToHome(i)}}},{key:"goToHome",value:function(t){var e=u(this.nexMapCoord,2),i=e[0],n=e[1],r=this.name;if(!this.toInput&&(14!==i||9!==n))return this.goToThePoint(t,14,9);this.toInput=!0;var o=u(_configCanvas.positionGoToHome[r],2),a=o[0],s=o[1];return i!==a||n!==s?this.goToThePoint(t,a,s):(this.toInput=!1,this.type="goOutside")}},{key:"lockedNextCoord",value:function(){var t=u(this.direction,1)[0],e=u(this.nexMapCoord,2),i=e[0],n=e[1];if(_configCanvas.game.eaten>=_configCanvas.counterEatinOutside[this.name]||_configCanvas.game.level>3)return this.exitLocked();t<0?this.setNewParamsMove([1,0],[i+2,n],[i,n]):this.setNewParamsMove([-1,0],[i-2,n],[i,n])}},{key:"exitLocked",value:function(){this.isLocked=!1,this.type="goOutside"}},{key:"goOutside",value:function(t){var e=u(this.nexMapCoord,2),i=e[0],n=e[1],r=this.eaten;if(14===i&&9===n)return _configCanvas.game.fright&&!r?(this.changeColor(),this.type="fright"):(this.eaten=!1,console.log(_configCanvas.game.currentGlobalType),this.type=_configCanvas.game.currentGlobalType);this.goToThePoint(t,14,9)}},{key:"proceedMotion",value:function(){var t=u(this.nexMapCoord,2),e=t[0],i=t[1],n=u(this.direction,2),r=n[0],o=n[1];this.nexMapCoord=[e+r,i+o],this.mapCoordiante=[e,i]}},{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=u(e.stope?n:i,2),o=r[0],a=r[1];this.goToThePoint(t,o,a)}},{key:"fright",value:function(t){var e=u(this.mapCoordiante,2),i=e[0],n=e[1],r=(t=t.filter((function(t){return t.nc[0]!==i||t.nc[1]!==n})))[Math.floor(Math.random()*t.length)];return this.setNewParamsMove(r.d,r.nc,this.nexMapCoord)}},{key:"diffusion",value:function(t){var e=u(this.diffusionPaintInMap,2),i=e[0],n=e[1];this.goToThePoint(t,i,n)}},{key:"goToThePoint",value:function(t,e,i){var n,r,o=u(this.nexMapCoord,2),a=o[0],s=o[1],c=this.changeType,l=u(this.mapCoordiante,2),f=l[0],y=l[1],d=a<e,p=s>i;if(c||(t=t.filter((function(t){return t.nc[0]!==f||t.nc[1]!==y}))),e===a)return(r=this.gorizontalPath(t,p,s,i)).length?this.setNewParamsMove(r[0].d,r[0].nc,this.nexMapCoord):this.hitTheWall(t,1,s);if(s===i)return(n=this.verticalPath(t,d,a,e)).length?this.setNewParamsMove(n[0].d,n[0].nc,this.nexMapCoord):this.hitTheWall(t,0,a);r=this.gorizontalPath(t,p,s,i),n=this.verticalPath(t,d,a,e);var v=[].concat(h(r),h(n));if(v.length){var m=v[Math.floor(Math.random()*v.length)];return this.setNewParamsMove(m.d,m.nc,this.nexMapCoord)}var g=t.filter((function(t){return t.nc[0]!==f||t.nc[1]!==y}));return this.setNewParamsMove(g[0].d,g[0].nc,this.nexMapCoord)}},{key:"hitTheWall",value:function(t,e,i){var n=this.filtrCurrentPlane(t,e,i),r=n[Math.floor(Math.random()*n.length)];return r?this.setNewParamsMove(r.d,r.nc,this.nexMapCoord):this.setNewParamsMove(t[0].d,t[0].nc,this.nexMapCoord)}},{key:"setNewParamsMove",value:function(t,e,i){this.mapCoordiante=i,this.nexMapCoord=e,this.direction=t}},{key:"checkElementPermeability",value:function(t){return"@"===t||"E"===t||"#"===t||("goOutside"===this.type||"goToHome"===this.type)&&"┅"===t}},{key:"filtrCurrentPlane",value:function(t,e,i){return t.filter((function(t){return t.nc[e]===i}))}},{key:"verticalPath",value:function(t,e,i){return e?t.filter((function(t){var e=u(t.nc,1)[0];return i<e})):t.filter((function(t){var e=u(t.nc,1)[0];return i>e}))}},{key:"gorizontalPath",value:function(t,e,i){return e?t.filter((function(t){var e=u(t.nc,2)[1];return i>e})):t.filter((function(t){var e=u(t.nc,2)[1];return i<e}))}},{key:"touchPacman",value:function(){var t=u(this.actualSituation,2),e=t[0],i=t[1],n=this.type,r=u(entities.pacman.actualSituation,2),o=r[0],a=r[1];if(e===o&&i===a){if(console.log(n),"fright"===n||"goToHome"===n)return _configCanvas.game.score+=200,clearInterval(_configCanvas.timeId.ghosts[this.name].fright),this.eaten=!0,this.color=this.originColor,this.type="goToHome";_configCanvas.game.play=!1}}},{key:"changeColor",value:function(){var t=this;this.color="#5d5db2",_configCanvas.timeId.ghosts[this.name].fright=setInterval((function(){if(!_configCanvas.game.fright)return clearInterval(_configCanvas.timeId.ghosts[t.name].fright),t.type=_configCanvas.game.currentGlobalType,t.color=t.originColor;t.color=t.color===t.originColor?"#5d5db2":t.originColor}),300)}},{key:"calcFactualSituation",value:function(){var t=u(this.coordinate,2),e=t[0],i=t[1],n=this.xSteep,r=this.ySteep,o=u(this.direction,2),a=(o[0],0===o[1]?[e,r,0]:[i,n,1]);this.actualSituation[a[2]]=Math.floor(a[0]/a[1])+(a[0]%a[1]>a[1]/2?1:0)}},{key:"paintGhost",value:function(){var t=this.contextGame,e=u(this.coordinate,2),i=e[0],n=e[1],r=this.color,o=this.xSteep,a=this.ySteep;if(this.type,"goToHome"!==this.type){t.beginPath(),t.fillStyle=r;var s=o/8,h=a/5;t.moveTo(n+2,i+a/3),t.quadraticCurveTo(n+o/2,i,n+o-2,i+a/3),t.lineTo(n+o,i+a);for(var c=!1,l=1;l<=8;l++)t.lineTo(n+(o-s*l),i+a-(c?0:h)),c=!c;t.fill()}var f=o/5;[1,-1].map((function(e){t.save(),t.fillStyle="#fff",t.beginPath(),t.translate(n+o/2+e*f,i+a/2),t.scale(1,1.3),t.arc(0,0,a/8,0,2*Math.PI),t.fill(),t.beginPath(),t.fillStyle="#000",t.arc(0,0,a/8/2,0,2*Math.PI),t.fill(),t.restore()})),t.closePath()}},{key:"paintPointHelper",value:function(t,e){var i=this.contextGame,n=this.xSteep,r=this.ySteep;i.beginPath(),i.fillStyle="#red",i.fillRect(e*n,t*r,n,r),i.closePath()}}])&&f(e.prototype,i),n&&f(e,n),t}();function d(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=P(t);if(e){var r=P(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return w(this,i)}}function w(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){x(i,t);var e=T(i);function i(t,n,r,o,a,s,h,u){var c;return k(this,i),(c=e.call(this)).diffusionPaintInMap=[29,1],c.contextGame=t,c.coordinate=[s,a],c.mapCoordiante=[h,u],c.nexMapCoord=[h+1,u],c.isLocked=!1,c.name="shadow",c.toInput=!1,c.xSteep=n,c.ySteep=r,c.actualSituation=[h,u],c.speed=1,c.map=o,c.color="#ff0000",c.originColor="#ff0000",c.direction=[1,0],c.type="diffusion",c.changeType=!1,c}return i}(y),O=function(t){x(i,t);var e=T(i);function i(t,n,r,o,a,s,h,u){var c;return k(this,i),(c=e.call(this)).diffusionPaintInMap=[1,26],c.name="pinki",c.contextGame=t,c.coordinate=[s,a],c.mapCoordiante=[h,u],c.nexMapCoord=[h-1,u],c.xSteep=n,c.ySteep=r,c.toInput=!1,c.actualSituation=[h,u],c.speed=1,c.map=o,c.color="#ffb9ff",c.originColor="#ffb9ff",c.isLocked=!0,c.direction=[-1,0],c.type="diffusion",c.changeType=!1,c}return b(i,[{key:"chase",value:function(t){for(var e,i=entities.pacman,n=i.nextMapCoord,r=i.mapCoord,o=i.stope,a=p(i.direction,2),s=a[0],h=a[1],u=i.gameMap,c=p(o?r:n,2),l=c[0],f=c[1],y=4;y>=0;y--){var v,m=l+y*h,g=f+y*s;if(this.checkElementPermeability(null===(v=u[m])||void 0===v?void 0:v[g])){e=[m,g];break}}this.goToThePoint.apply(this,[t].concat(d(e)))}}]),i}(y),I=function(t){x(i,t);var e=T(i);function i(t,n,r,o,a,s,h,u){var c;return k(this,i),(c=e.call(this)).diffusionPaintInMap=[1,1],c.contextGame=t,c.coordinate=[s,a],c.mapCoordiante=[h,u],c.nexMapCoord=[h+1,u],c.xSteep=n,c.ySteep=r,c.actualSituation=[h,u],c.speed=1,c.map=o,c.toInput=!1,c.color="#00ffff",c.originColor="#00ffff",c.isLocked=!0,c.name="inki",c.direction=[1,0],c.type="diffusion",c.changeType=!1,c}return b(i,[{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=e.stope,o=p(e.direction,2),a=o[0],s=o[1],h=e.gameMap,u=p(entities.shadow.nexMapCoord,2),c=u[0],l=u[1],f=p(r?n:i,2),y=f[0],v=f[1],m=[y,v],g=l>(v=v+2*a-1)?[-3,1]:[3,-1],b=c<(y=y+2*s-1)?[3,-1]:[-3,1];t:for(var C=b[0];0!==C;C+=b[1])for(var k=g[0];0!==k;k+=g[1]){var x,M=y+C,T=v+k;if(this.checkElementPermeability(null===(x=h[y+C])||void 0===x?void 0:x[v+k])){m=[M,T];break t}}this.goToThePoint.apply(this,[t].concat(d(m)))}}]),i}(y),L=function(t){x(i,t);var e=T(i);function i(t,n,r,o,a,s,h,u){var c;return k(this,i),(c=e.call(this)).diffusionPaintInMap=[26,29],c.contextGame=t,c.coordinate=[s,a],c.mapCoordiante=[h,u],c.nexMapCoord=[h-1,u],c.xSteep=n,c.ySteep=r,c.actualSituation=[h,u],c.speed=1,c.map=o,c.isLocked=!0,c.name="klayd",c.color="#ffb951",c.originColor="#ffb951",c.toInput=!1,c.direction=[-1,0],c.type="diffusion",c.changeType=!1,c}return b(i,[{key:"chase",value:function(t){var e=entities.pacman,i=e.nextMapCoord,n=e.mapCoord,r=e.stope,o=p(this.mapCoordiante,2),a=o[0],s=o[1],h=p(r?n:i,2),u=h[0],c=h[1];if(Math.abs(u-a)<8&&Math.abs(s-c)<8)return this.diffusion(t);this.goToThePoint(t,u,c)}}]),i}(y);function j(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E=function(){function t(e,i,n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gameMap=r,this.c=n,this.entities=a,this.cg=o,this.xs=e,this.ys=i,this.cy=i/2,this.cx=e/2,this.dy=i/8,this.dx=e/8,this.ew=e/5,this.eh=i/5,this.exhs=e/2-this.ew/2,this.eyhs=i/2-this.eh/2,this.lineWidth=4,this.colorLine="#1b1bcd"}var e,i,n;return e=t,(i=[{key:"@",value:function(t,e,i,n){var r=this.c,o=this.ew,a=this.eh,s=this.exhs,h=this.eyhs;this.eatItem,r.fillStyle="#ffb8ae",r.fillRect(t+s,e+h,o,a)}},{key:"E",value:function(t,e){var i=this.c,n=this.cy,r=this.cx;i.fillStyle="ffb8ae",i.arc(t+r,e+n,n<r?n:r,0,2*Math.PI),i.fill(),i.beginPath()}},{key:"#",value:function(){}},{key:"X",value:function(){}},{key:"=",value:function(t,e){return this.rdl(t,e,!0)}},{key:"P",value:function(t,e,i,n){var r=this.cg,o=this.xs,a=this.ys,h=this.gameMap,u=this.c,c=this.entities;c.pacman=new s(r,o,a,t,e,i,n,h,u,c)}},{key:"║",value:function(t,e){return this.rdl(t,e,!1)}},{key:"╬",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!0]))}},{key:"╪",value:function(){return this.rda.apply(this,Array.prototype.slice.call(arguments).concat([!1]))}},{key:"┅",value:function(t,e){var i=this.c,n=this.cx,r=this.ys,o=this.lineWidth;i.strokeStyle="#ffb8ff",i.lineWidth=o,i.moveTo(t+n,e),i.lineTo(t+n,e+r)}},{key:"|",value:function(t,e){return this.rsl(t,e,!1)}},{key:"-",value:function(t,e){return this.rsl(t,e,!0)}},{key:"L",value:function(t,e){var i=this.xs,n=this.cx,r=this.cy;return this.rsa([t+n,e],[t+n,e+r,t+i,e+r])}},{key:"╕",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t,e+o+s,t+r-a,e+o+s,t+r,e+n,t,e+o-s,e+o-s,t+i)}},{key:"╒",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+i,e+o+s,t+r+a,e+o+s,t+r,e+n,t,e+o-s,e+o-s,t+i)}},{key:"┏",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy;return this.rsa([t+r,e+n],[t+r,e+o,t+i,e+o])}},{key:"┛",value:function(t,e){this.xs,this.ys;var i=this.cx,n=this.cy;return this.rsa([t,e+n],[t+i,e+n,t+i,e])}},{key:"┓",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy;return this.rsa([t,e+r],[t+n,e+r,t+n,e+i])}},{key:"╓",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r+a,e+n,t+r+s,e+o-s,t+i,e+o,t+r-a,e,e+n)}},{key:"╙",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r+a,e,t+r+a,e+o+s,t+i,e+o,t+r-a,e,e+n)}},{key:"╜",value:function(t,e){this.xs;var i=this.ys,n=this.cx,r=this.cy,o=this.dx,a=this.dy;return this.rdla(t+n-o,e,t+n-a,e+r,t,e+r,t+n+o,e,e+i)}},{key:"╖",value:function(t,e){var i=this.xs,n=this.ys,r=this.cx,o=this.cy,a=this.dx,s=this.dy;return this.rdla(t+r-a,e+n,t+r-a,e+o-s,t,e+o,t+r+a,e,e+i)}},{key:"rdla",value:function(t,e,i,n,r,o,a,s,h,u){var c=this.c,l=this.colorLine,f=this.lineWidth;c.strokeStyle=l,c.lineWidth=f,c.moveTo(t,e),c.quadraticCurveTo(i,n,r,o),c.moveTo(a,s),c.lineTo(u||a,h)}},{key:"rsa",value:function(t,e){var i=this.c;i.moveTo.apply(i,j(t)),i.quadraticCurveTo.apply(i,j(e))}},{key:"rsl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,a=this.xs,s=this.ys,h=this.colorLine,u=this.lineWidth;n.strokeStyle=h,n.lineWidth=u,i?(n.moveTo(t,e+r),n.lineTo(t+a,e+r)):(n.moveTo(t+o,e),n.lineTo(t+o,e+s))}},{key:"rda",value:function(t,e,i,n,r){var o=this.xs,a=this.ys,s=this.cx,h=this.cy,u=this.dy,c=this.dx,l=this.c,f=this.gameMap,y=this.colorLine,d=this.lineWidth,p=[];l.strokeStyle=y,l.lineWidth=d,i+1==f.length||"="!==f[i+1][n]&&"║"!==f[i+1][n]||p.push([t+s,e+a]),0==i||"="!==f[i-1][n]&&"║"!==f[i-1][n]||p.push([t+s,e]),n+1==f[i].length||"="!==f[i][n+1]&&"║"!==f[i][n+1]||p.push([t+o,e+h]),0==n||"="!==f[i][n-1]&&"║"!==f[i][n-1]||p.push([t,e+h]);var v=p[0],m=p[1],g=v[0],b=v[1],C=m[0],k=m[1],x=g<C?k>b?-1:1:k>b?1:-1,M=g<C?-1:1;[-1,1].map((function(t){l.moveTo(g+c*t,b),r?l.quadraticCurveTo(C+s*M+c*t,k+u*t*x,C,k+u*t*x):(l.lineTo(C+s*M+c*t,k+u*t*x),l.lineTo(C,k+u*t*x))}))}},{key:"rdl",value:function(t,e,i){var n=this.c,r=this.cy,o=this.cx,a=this.dx,s=this.dy,h=this.xs,u=this.ys,c=this.colorLine,l=this.lineWidth;n.strokeStyle=c,n.lineWidth=l,i?(n.moveTo(t,e+r-s),n.lineTo(t+h,e+r-s),n.moveTo(t,e+r+s),n.lineTo(t+h,e+r+s),n.stroke()):(n.moveTo(t+o-a,e),n.lineTo(t+o-a,e+u),n.moveTo(t+o+a,e),n.lineTo(t+o+a,e+u),n.stroke())}}])&&_(e.prototype,i),n&&_(e,n),t}();function G(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var H=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.size=e,this.gm=i}var e,i,n;return e=t,(i=[{key:"setSize",value:function(){for(var t=this.gm,e=this.size,i=Math.floor(e/t[0].length),n=Math.floor(e/t.length),r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.map((function(e){e.width=i*t[0].length,e.height=n*t.length})),[i,n]}}])&&G(e.prototype,i),n&&G(e,n),t}();function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(){var t=document.getElementById("map");window.entities={pacman:{}};var e,i,n,r,o,a,s,h,u,c,l,f,y,d=document.getElementById("game"),p=window.innerWidth>window.innerHeight?window.innerHeight-15:window.innerWidth-15,v=t.getContext("2d"),m=d.getContext("2d"),g=[["╬","=","=","=","=","=","=","=","=","=","=","=","=","╕","╒","=","=","=","=","=","=","=","=","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","E","|","#","#","|","@","|","#","#","#","|","@","|","|","@","|","#","#","#","|","@","|","#","#","|","E","║"],["║","@","L","-","-","┛","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","-","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","-","-","┛","@","║"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["╬","=","=","=","=","╬","@","|","L","-","-","┓","@","|","|","@","┏","-","-","┛","|","@","╬","=","=","=","=","╬"],["#","#","#","#","#","║","@","|","┏","-","-","┛","@","L","┛","@","L","-","-","┓","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["=","=","=","=","=","╬","@","L","┛","@","║","#","#","#","#","#","#","║","@","L","┛","@","╬","=","=","=","=","="],["X","#","#","#","#","#","@","@","@","@","┅","#","#","#","#","#","#","║","@","@","@","@","#","#","#","#","#","X"],["=","=","=","=","=","╬","@","┏","┓","@","║","#","#","#","#","#","#","║","@","┏","┓","@","╬","=","=","=","=","="],["#","#","#","#","#","║","@","|","|","@","╪","=","=","=","=","=","=","╪","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","@","@","@","@","@","@","@","@","@","|","|","@","║","#","#","#","#","#"],["#","#","#","#","#","║","@","|","|","@","┏","-","-","-","-","-","-","┓","@","|","|","@","║","#","#","#","#","#"],["╬","=","=","=","=","╬","@","L","┛","@","L","-","-","┓","┏","-","-","┛","@","L","┛","@","╬","=","=","=","=","╬"],["║","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","║"],["║","@","┏","-","-","┓","@","┏","-","-","-","┓","@","|","|","@","┏","-","-","-","┓","@","┏","-","-","┓","@","║"],["║","@","L","-","┓","|","@","L","-","-","-","┛","@","L","┛","@","L","-","-","-","┛","@","|","┏","-","┛","@","║"],["║","E","@","@","|","|","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","|","|","@","@","E","║"],["╙","-","┓","@","|","|","@","┏","┓","@","┏","-","-","-","-","-","-","┓","@","┏","┓","@","|","|","@","┏","-","╜"],["╓","-","┛","@","L","┛","@","|","|","@","L","-","-","┓","┏","-","-","┛","@","|","|","@","L","┛","@","L","-","╖"],["║","@","@","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","|","|","@","@","@","@","@","@","║"],["║","@","┏","-","-","-","-","┛","L","-","-","┓","@","|","|","@","┏","-","-","┛","L","-","-","-","-","┓","@","║"],["║","@","L","-","-","-","-","-","-","-","-","┛","@","L","┛","@","L","-","-","-","-","-","-","-","-","┛","@","║"],["║","@","@","@","@","@","@","@","P","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","@","║"],["╬","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","=","╬"]],b=W(new H(p,g).setSize(t,d),2),C=b[0],k=b[1],x=new E(C,k,v,g,m,entities);function M(){for(var t=_configCanvas.game.level,e=_configCanvas.timeTable[1===t?0:t>=5?2:1][_configCanvas.game.countPeriod++],i=0,n=Object.values(entities);i<n.length;i++){var r=n[i],o=r.type;"pac man"!==o&&"goOutside"!==o&&"fright"!==o&&"goToHome"!==o&&(r.type=e.type)}_configCanvas.game.currentGlobalType=e.type,e.time&&setTimeout(M,e.time)}function T(){var t=entities,e=t.pacman,i=t.shadow,n=t.pinki,r=t.inki,o=t.klayd;_configCanvas.game.play&&(e.renderPacMan(),i.render(),n.render(),r.render(),o.render(),requestAnimationFrame(T))}g.map((function(t,e){t.map((function(t,i){v.beginPath(),x[t](C*i,k*e,e,i),v.stroke()}))})),e=_configCanvas.ghostPosition,i=W(e.pinki,2),n=i[0],r=i[1],o=W(e.shadow,2),a=o[0],s=o[1],h=W(e.inki,2),u=h[0],c=h[1],l=W(e.klayd,2),f=l[0],y=l[1],entities.shadow=new S(m,C,k,g,C*s,k*a,a,s),entities.pinki=new O(m,C,k,g,C*r,k*n,n,r),entities.inki=new I(m,C,k,g,C*c,k*u,u,c),entities.klayd=new L(m,C,k,g,C*y,k*f,f,y),M(),T()}()}]);